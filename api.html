<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Dynamallow API &mdash; Dynamallow 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Dynamallow 0.0.1 documentation" href="index.html" />
    <link rel="next" title="Motivation for creating Dynamallow" href="motivation.html" />
    <link rel="prev" title="Developing" href="developing.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="dynamallow-api">
<h1>Dynamallow API<a class="headerlink" href="#dynamallow-api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-dynamallow">
<span id="dynamallow"></span><h2><code class="docutils literal"><span class="pre">dynamallow</span></code><a class="headerlink" href="#module-dynamallow" title="Permalink to this headline">¶</a></h2>
<p>The base module namespace simply imports <code class="docutils literal"><span class="pre">MarshModel</span></code> from <code class="docutils literal"><span class="pre">dynamallow.model</span></code> so that you can:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dynamallow</span> <span class="kn">import</span> <span class="n">MarshModel</span>
</pre></div>
</div>
</div>
<div class="section" id="module-dynamallow.model">
<span id="dynamallow-model"></span><h2><code class="docutils literal"><span class="pre">dynamallow.model</span></code><a class="headerlink" href="#module-dynamallow.model" title="Permalink to this headline">¶</a></h2>
<p>Models represent tables in DynamoDB and define the characteristics of the Dynamo service as well as the Marshmallow
schema that is used for validating and marshalling your data.</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">dynamallow.model.</code><code class="descname">MarshModel</code><span class="sig-paren">(</span><em>raw=None</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p><code class="docutils literal"><span class="pre">MarshModel</span></code> is the base class all of your models will extend from.  This model definition encapsulates the
parameters used to create and manage the table as well as the schema for validating and marshalling data into object
attributes.  It will also hold any custom business logic you need for your objects.</p>
<p>Your class must define two inner classes that specify the Dynamo Table options and the Marshmallow Schema,
respectively.</p>
<p>The Dynamo Table options are defined in a class named <code class="docutils literal"><span class="pre">Table</span></code>.  See the <a class="reference internal" href="#module-dynamallow.table" title="dynamallow.table"><code class="xref py py-mod docutils literal"><span class="pre">dynamallow.table</span></code></a> module for
more information.</p>
<p>The Marshmallow Schema is defined in a class named <code class="docutils literal"><span class="pre">Schema</span></code>, which should be filled out exactly as you would fill
out any other <a class="reference external" href="https://marshmallow.readthedocs.io/en/latest/api_reference.html#marshmallow.Schema" title="(in marshmallow v2.7.3)"><code class="xref py py-class docutils literal"><span class="pre">Schema</span></code></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You do not need to have Schema extend from the marshmallow <a class="reference external" href="https://marshmallow.readthedocs.io/en/latest/api_reference.html#marshmallow.Schema" title="(in marshmallow v2.7.3)"><code class="xref py py-class docutils literal"><span class="pre">Schema</span></code></a> class as we
automatically do that for you, to make model definition more concise.</p>
<p>The same is true for the Table class.  We will automatically transform it so that it extends from the
<a class="reference internal" href="#dynamallow.table.DynamoTable3" title="dynamallow.table.DynamoTable3"><code class="xref py py-class docutils literal"><span class="pre">dynamallow.table.DynamoTable3</span></code></a>.</p>
<p class="last">In either case you&#8217;re free to define them as extending from the actual base classes if you prefer to be explicit.</p>
</div>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">dynamallow</span> <span class="kn">import</span> <span class="n">MarshModel</span>

<span class="kn">from</span> <span class="nn">marshmallow</span> <span class="kn">import</span> <span class="n">fields</span><span class="p">,</span> <span class="n">validate</span>


<span class="k">class</span> <span class="nc">Thing</span><span class="p">(</span><span class="n">MarshModel</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Table</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;{env}-things&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">env</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ENVIRONMENT&#39;</span><span class="p">,</span> <span class="s1">&#39;dev&#39;</span><span class="p">))</span>
        <span class="n">hash_key</span> <span class="o">=</span> <span class="s1">&#39;id&#39;</span>
        <span class="n">read</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="n">write</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">class</span> <span class="nc">Schema</span><span class="p">:</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">validate</span><span class="o">=</span><span class="n">validate</span><span class="o">.</span><span class="n">OneOf</span><span class="p">((</span><span class="s1">&#39;purple&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">say_hello</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Hello.  {name} here.  My ID is {id} and I&#39;m colored {color}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span>
        <span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="dynamallow.model.MarshModel">
<em class="property">class </em><code class="descclassname">dynamallow.model.</code><code class="descname">MarshModel</code><span class="sig-paren">(</span><em>raw=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dynamallow.model.MarshModel" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal"><span class="pre">MarshModel</span></code> is the base class all of your models will extend from.  This model definition encapsulates the
parameters used to create and manage the table as well as the schema for validating and marshalling data into object
attributes.  It will also hold any custom business logic you need for your objects.</p>
<p>Your class must define two inner classes that specify the Dynamo Table options and the Marshmallow Schema,
respectively.</p>
<p>The Dynamo Table options are defined in a class named <code class="docutils literal"><span class="pre">Table</span></code>.  See the <a class="reference internal" href="#module-dynamallow.table" title="dynamallow.table"><code class="xref py py-mod docutils literal"><span class="pre">dynamallow.table</span></code></a> module for
more information.</p>
<p>The Marshmallow Schema is defined in a class named <code class="docutils literal"><span class="pre">Schema</span></code>, which should be filled out exactly as you would fill
out any other <a class="reference external" href="https://marshmallow.readthedocs.io/en/latest/api_reference.html#marshmallow.Schema" title="(in marshmallow v2.7.3)"><code class="xref py py-class docutils literal"><span class="pre">Schema</span></code></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You do not need to have Schema extend from the marshmallow <a class="reference external" href="https://marshmallow.readthedocs.io/en/latest/api_reference.html#marshmallow.Schema" title="(in marshmallow v2.7.3)"><code class="xref py py-class docutils literal"><span class="pre">Schema</span></code></a> class as we
automatically do that for you, to make model definition more concise.</p>
<p>The same is true for the Table class.  We will automatically transform it so that it extends from the
<a class="reference internal" href="#dynamallow.table.DynamoTable3" title="dynamallow.table.DynamoTable3"><code class="xref py py-class docutils literal"><span class="pre">dynamallow.table.DynamoTable3</span></code></a>.</p>
<p class="last">In either case you&#8217;re free to define them as extending from the actual base classes if you prefer to be explicit.</p>
</div>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">dynamallow</span> <span class="kn">import</span> <span class="n">MarshModel</span>

<span class="kn">from</span> <span class="nn">marshmallow</span> <span class="kn">import</span> <span class="n">fields</span><span class="p">,</span> <span class="n">validate</span>


<span class="k">class</span> <span class="nc">Thing</span><span class="p">(</span><span class="n">MarshModel</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Table</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;{env}-things&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">env</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ENVIRONMENT&#39;</span><span class="p">,</span> <span class="s1">&#39;dev&#39;</span><span class="p">))</span>
        <span class="n">hash_key</span> <span class="o">=</span> <span class="s1">&#39;id&#39;</span>
        <span class="n">read</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="n">write</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">class</span> <span class="nc">Schema</span><span class="p">:</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">validate</span><span class="o">=</span><span class="n">validate</span><span class="o">.</span><span class="n">OneOf</span><span class="p">((</span><span class="s1">&#39;purple&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">say_hello</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Hello.  {name} here.  My ID is {id} and I&#39;m colored {color}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span>
        <span class="p">))</span>
</pre></div>
</div>
<dl class="classmethod">
<dt id="dynamallow.model.MarshModel.get">
<em class="property">classmethod </em><code class="descname">get</code><span class="sig-paren">(</span><em>consistent=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dynamallow.model.MarshModel.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an item from the table</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Thing</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">hash_key</span><span class="o">=</span><span class="s2">&quot;three&quot;</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>consistent</strong> (<em>bool</em>) &#8211; If set to True the get will be a consistent read</li>
<li><strong>**kwargs</strong> &#8211; You must supply your hash key, and range key if used, with the values to get</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="dynamallow.model.MarshModel.new_from_raw">
<em class="property">classmethod </em><code class="descname">new_from_raw</code><span class="sig-paren">(</span><em>raw</em><span class="sig-paren">)</span><a class="headerlink" href="#dynamallow.model.MarshModel.new_from_raw" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new instance of this model from a raw (dict) of data that is loaded by our Schema</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>raw</strong> (<em>dict</em>) &#8211; The attributes to use when creating the instance</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="dynamallow.model.MarshModel.put">
<em class="property">classmethod </em><code class="descname">put</code><span class="sig-paren">(</span><em>item</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dynamallow.model.MarshModel.put" title="Permalink to this definition">¶</a></dt>
<dd><p>Put a single item into the table for this model</p>
<p>The attributes on the item go through validation, so this may raise <a class="reference internal" href="#dynamallow.model.ValidationError" title="dynamallow.model.ValidationError"><code class="xref py py-class docutils literal"><span class="pre">ValidationError</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>item</strong> (<em>dict</em>) &#8211; The item to put into the table</li>
<li><strong>**kwargs</strong> &#8211; All other kwargs are passed through to the put method on the table</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="dynamallow.model.MarshModel.put_batch">
<em class="property">classmethod </em><code class="descname">put_batch</code><span class="sig-paren">(</span><em>*items</em>, <em>**batch_kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dynamallow.model.MarshModel.put_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Put one or more items into the table</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>*items</strong> &#8211; The items to put into the table</li>
<li><strong>**kwargs</strong> &#8211; All other kwargs are passed through to the put_batch method on the table</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Thing</span><span class="o">.</span><span class="n">put_batch</span><span class="p">(</span>
    <span class="p">{</span><span class="s2">&quot;hash_key&quot;</span><span class="p">:</span> <span class="s2">&quot;one&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;hash_key&quot;</span><span class="p">:</span> <span class="s2">&quot;two&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;hash_key&quot;</span><span class="p">:</span> <span class="s2">&quot;three&quot;</span><span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="classmethod">
<dt id="dynamallow.model.MarshModel.put_unique">
<em class="property">classmethod </em><code class="descname">put_unique</code><span class="sig-paren">(</span><em>item</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dynamallow.model.MarshModel.put_unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Put a single item into the table for this model, with a unique attribute constraint on the hash key</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>item</strong> (<em>dict</em>) &#8211; The item to put into the table</li>
<li><strong>**kwargs</strong> &#8211; All other kwargs are passed through to the put_unique method on the table</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="dynamallow.model.MarshModel.query">
<em class="property">classmethod </em><code class="descname">query</code><span class="sig-paren">(</span><em>query_kwargs=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dynamallow.model.MarshModel.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a query on our table based on our keys</p>
<p>You supply the key(s) to query based on as keyword arguments:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Thing</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s2">&quot;Mr. Foo&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>By default the <code class="docutils literal"><span class="pre">eq</span></code> condition is used.  If you wish to use any of the other <a class="reference external" href="http://boto3.readthedocs.io/en/latest/reference/customizations/dynamodb.html#boto3.dynamodb.conditions.Key">valid conditions for keys</a> use
a double underscore syntax following the key name.  For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Thing</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">foo__begins_with</span><span class="o">=</span><span class="s2">&quot;Mr.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>query_kwargs</strong> (<em>dict</em>) &#8211; Extra parameters that should be passed through to the Table query function</li>
<li><strong>**kwargs</strong> &#8211; The key(s) and value(s) to query based on</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dynamallow.model.MarshModel.save">
<code class="descname">save</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dynamallow.model.MarshModel.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save this instance to the table</p>
<p>The attributes on the item go through validation, so this may raise <a class="reference internal" href="#dynamallow.model.ValidationError" title="dynamallow.model.ValidationError"><code class="xref py py-class docutils literal"><span class="pre">ValidationError</span></code></a>.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dynamallow.model.MarshModel.scan">
<em class="property">classmethod </em><code class="descname">scan</code><span class="sig-paren">(</span><em>scan_kwargs=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dynamallow.model.MarshModel.scan" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a scan on our table</p>
<p>You supply the attr(s) to query based on as keyword arguments:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Thing</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="n">age</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>By default the <code class="docutils literal"><span class="pre">eq</span></code> condition is used.  If you wish to use any of the other <a class="reference external" href="http://boto3.readthedocs.io/en/latest/reference/customizations/dynamodb.html#boto3.dynamodb.conditions.Attr">valid conditions for attrs</a> use
a double underscore syntax following the key name.  For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Thing</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="n">age__lte</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>Accessing nested attributes also uses the double underscore syntax:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Thing</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="n">address__state</span><span class="o">=</span><span class="s2">&quot;CA&quot;</span><span class="p">)</span>
<span class="n">Thing</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="n">address__state__begins_with</span><span class="o">=</span><span class="s2">&quot;C&quot;</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>scan_kwargs</strong> (<em>dict</em>) &#8211; Extra parameters that should be passed through to the Table scan function</li>
<li><strong>**kwargs</strong> &#8211; The key(s) and value(s) to filter based on</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="dynamallow.model.MarshModelException">
<em class="property">exception </em><code class="descclassname">dynamallow.model.</code><code class="descname">MarshModelException</code><a class="headerlink" href="#dynamallow.model.MarshModelException" title="Permalink to this definition">¶</a></dt>
<dd><p>Base exception for MarshModel problems</p>
</dd></dl>

<dl class="class">
<dt id="dynamallow.model.MarshModelMeta">
<em class="property">class </em><code class="descclassname">dynamallow.model.</code><code class="descname">MarshModelMeta</code><a class="headerlink" href="#dynamallow.model.MarshModelMeta" title="Permalink to this definition">¶</a></dt>
<dd><p>MarshModelMeta is a metaclass for the MarshModel class that transforms our Table and Schema classes</p>
<p>Since we can inspect the data we need to build the full data structures needed for working with tables and indexes
users can define for more concise and readable table definitions that we transform into the final To allow for a
more concise definition of MarshModel&#8217;s we do not require that users define their inner Schema class as extending
from the <a class="reference external" href="https://marshmallow.readthedocs.io/en/latest/api_reference.html#marshmallow.Schema" title="(in marshmallow v2.7.3)"><code class="xref py py-class docutils literal"><span class="pre">Schema</span></code></a>.  Instead, when the class is being defined we take the inner Schema and
transform it into a new class named &lt;Name&gt;Schema, extending from <a class="reference external" href="https://marshmallow.readthedocs.io/en/latest/api_reference.html#marshmallow.Schema" title="(in marshmallow v2.7.3)"><code class="xref py py-class docutils literal"><span class="pre">Schema</span></code></a>.  For example, on a
model named <code class="docutils literal"><span class="pre">Foo</span></code> the resulting <code class="docutils literal"><span class="pre">Foo.Schema</span></code> object would be an instance of a class named <code class="docutils literal"><span class="pre">FooSchema</span></code>, rather
than a class named <code class="docutils literal"><span class="pre">Schema</span></code></p>
</dd></dl>

<dl class="exception">
<dt id="dynamallow.model.ValidationError">
<em class="property">exception </em><code class="descclassname">dynamallow.model.</code><code class="descname">ValidationError</code><span class="sig-paren">(</span><em>errors</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dynamallow.model.ValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Schema validation failed</p>
</dd></dl>

</div>
<div class="section" id="module-dynamallow.table">
<span id="dynamallow-table"></span><h2><code class="docutils literal"><span class="pre">dynamallow.table</span></code><a class="headerlink" href="#module-dynamallow.table" title="Permalink to this headline">¶</a></h2>
<p>The inner <code class="docutils literal"><span class="pre">Table</span></code> class on <code class="docutils literal"><span class="pre">MarshModels</span></code> becomes an instance of a DynamoTable3.</p>
<p>The attributes you define on your inner <code class="docutils literal"><span class="pre">Table</span></code> class map to underlying boto data structures.  This mapping is
expressed through the following data model:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="10%" />
<col width="5%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Required</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td>True</td>
<td>str</td>
<td>The name of the table, as stored in Dynamo.</td>
</tr>
<tr class="row-odd"><td>hash_key</td>
<td>True</td>
<td>str</td>
<td>The name of the field to use as the hash key.
It must exist in the schema.</td>
</tr>
<tr class="row-even"><td>range_key</td>
<td>False</td>
<td>str</td>
<td>The name of the field to use as the range_key, if one is used.
It must exist in the schema.</td>
</tr>
<tr class="row-odd"><td>read</td>
<td>True</td>
<td>int</td>
<td>The provisioned read throughput.</td>
</tr>
<tr class="row-even"><td>write</td>
<td>True</td>
<td>int</td>
<td>The provisioned write throughput.</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="dynamallow.table.DynamoTable3">
<em class="property">class </em><code class="descclassname">dynamallow.table.</code><code class="descname">DynamoTable3</code><span class="sig-paren">(</span><em>schema</em><span class="sig-paren">)</span><a class="headerlink" href="#dynamallow.table.DynamoTable3" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a Table object in the Boto3 DynamoDB API</p>
<p>This is built in such a way that in the future, when Amazon releases future boto versions, a new DynamoTable class
can be authored that implements the same methods but maps through to the new semantics.</p>
<dl class="attribute">
<dt id="dynamallow.table.DynamoTable3.attribute_definitions">
<code class="descname">attribute_definitions</code><a class="headerlink" href="#dynamallow.table.DynamoTable3.attribute_definitions" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an appropriate AttributeDefinitions, based on our key attributes and the schema object</p>
</dd></dl>

<dl class="method">
<dt id="dynamallow.table.DynamoTable3.create">
<code class="descname">create</code><span class="sig-paren">(</span><em>wait=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dynamallow.table.DynamoTable3.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new table based on our attributes</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>wait</strong> (<em>bool</em>) &#8211; If set to True, the default, this call will block until the table is created</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dynamallow.table.DynamoTable3.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>wait=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dynamallow.table.DynamoTable3.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete this existing table</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>wait</strong> (<em>bool</em>) &#8211; If set to True, the default, this call will block until the table is created</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="dynamallow.table.DynamoTable3.exists">
<code class="descname">exists</code><a class="headerlink" href="#dynamallow.table.DynamoTable3.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True or False based on the existance of this tables name in our resource</p>
</dd></dl>

<dl class="classmethod">
<dt id="dynamallow.table.DynamoTable3.get_resource">
<em class="property">classmethod </em><code class="descname">get_resource</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dynamallow.table.DynamoTable3.get_resource" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the boto3 dynamodb resource, create it if it doesn&#8217;t exist</p>
<p>The resource is stored globally on the <code class="docutils literal"><span class="pre">DynamoTable3</span></code> class and is shared between all models.  To influence
the connection parameters you just need to call <code class="docutils literal"><span class="pre">get_resource</span></code> on any model with the correct kwargs BEFORE you
use any of the models.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dynamallow.table.DynamoTable3.get_table">
<em class="property">classmethod </em><code class="descname">get_table</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#dynamallow.table.DynamoTable3.get_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the boto3 Table object for this model, create it if it doesn&#8217;t exist</p>
<p>The Table is stored on the class for each model, so it is shared between all instances of a given model.</p>
</dd></dl>

<dl class="attribute">
<dt id="dynamallow.table.DynamoTable3.key_schema">
<code class="descname">key_schema</code><a class="headerlink" href="#dynamallow.table.DynamoTable3.key_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an appropriate KeySchema, based on our key attributes and the schema object</p>
</dd></dl>

<dl class="attribute">
<dt id="dynamallow.table.DynamoTable3.provisioned_throughput">
<code class="descname">provisioned_throughput</code><a class="headerlink" href="#dynamallow.table.DynamoTable3.provisioned_throughput" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an appropriate ProvisionedThroughput, based on our attributes</p>
</dd></dl>

<dl class="method">
<dt id="dynamallow.table.DynamoTable3.put">
<code class="descname">put</code><span class="sig-paren">(</span><em>item</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dynamallow.table.DynamoTable3.put" title="Permalink to this definition">¶</a></dt>
<dd><p>Put a singular item into the table</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>item</strong> (<em>dict</em>) &#8211; The data to put into the table</li>
<li><strong>**kwargs</strong> &#8211; All other keyword arguments are passed through to the <a class="reference external" href="http://boto3.readthedocs.io/en/latest/reference/services/dynamodb.html#DynamoDB.Table.put_item">DynamoDB Table put_item</a> function.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="dynamallow.table.DynamoTable3.resource">
<code class="descname">resource</code><a class="headerlink" href="#dynamallow.table.DynamoTable3.resource" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the boto3 resource</p>
</dd></dl>

<dl class="attribute">
<dt id="dynamallow.table.DynamoTable3.table">
<code class="descname">table</code><a class="headerlink" href="#dynamallow.table.DynamoTable3.table" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the boto3 table</p>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="dynamallow.table.DynamoTableException">
<em class="property">exception </em><code class="descclassname">dynamallow.table.</code><code class="descname">DynamoTableException</code><a class="headerlink" href="#dynamallow.table.DynamoTableException" title="Permalink to this definition">¶</a></dt>
<dd><p>Base exception class for all DynamoTable errors</p>
</dd></dl>

<dl class="exception">
<dt id="dynamallow.table.HashKeyExists">
<em class="property">exception </em><code class="descclassname">dynamallow.table.</code><code class="descname">HashKeyExists</code><a class="headerlink" href="#dynamallow.table.HashKeyExists" title="Permalink to this definition">¶</a></dt>
<dd><p>A operating requesting a unique hash key failed</p>
</dd></dl>

<dl class="exception">
<dt id="dynamallow.table.InvalidKey">
<em class="property">exception </em><code class="descclassname">dynamallow.table.</code><code class="descname">InvalidKey</code><a class="headerlink" href="#dynamallow.table.InvalidKey" title="Permalink to this definition">¶</a></dt>
<dd><p>A parameter is not a valid key</p>
</dd></dl>

<dl class="exception">
<dt id="dynamallow.table.InvalidSchemaField">
<em class="property">exception </em><code class="descclassname">dynamallow.table.</code><code class="descname">InvalidSchemaField</code><a class="headerlink" href="#dynamallow.table.InvalidSchemaField" title="Permalink to this definition">¶</a></dt>
<dd><p>A field provided does not exist in the schema</p>
</dd></dl>

<dl class="exception">
<dt id="dynamallow.table.MissingTableAttribute">
<em class="property">exception </em><code class="descclassname">dynamallow.table.</code><code class="descname">MissingTableAttribute</code><a class="headerlink" href="#dynamallow.table.MissingTableAttribute" title="Permalink to this definition">¶</a></dt>
<dd><p>A required attribute is missing</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/dynamallow-logo.png" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">DynamoDB + Marshmallow — Two awesome things, better together!<br /></p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=borgstrom&repo=dynamallow&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





    

<p>
<a href="https://travis-ci.org/borgstrom/dynamallow">
    <img
        alt="https://secure.travis-ci.org/borgstrom/dynamallow.svg?branch=master"
        src="https://secure.travis-ci.org/borgstrom/dynamallow.svg?branch=master"
    />
</a>
</p>




    

<p>
<a href="https://codecov.io/github/borgstrom/dynamallow">
    <img
    alt="https://codecov.io/github/borgstrom/dynamallow/coverage.svg?branch=master"
    src="https://codecov.io/github/borgstrom/dynamallow/coverage.svg?branch=master"
    />
</a>
</p>
<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="developing.html">Developing</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Dynamallow API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-dynamallow"><code class="docutils literal"><span class="pre">dynamallow</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-dynamallow.model"><code class="docutils literal"><span class="pre">dynamallow.model</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-dynamallow.table"><code class="docutils literal"><span class="pre">dynamallow.table</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="motivation.html">Motivation for creating Dynamallow</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="developing.html" title="previous chapter">Developing</a></li>
      <li>Next: <a href="motivation.html" title="next chapter">Motivation for creating Dynamallow</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy; 2016 <a href="http://borgstrom.ca">Evan Borgstrom</a>.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
    </div>

    
    <a href="https://github.com/borgstrom/dynamallow" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>